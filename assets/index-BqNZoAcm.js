import{i as j,r as v,c as U,R as W,u as F,_ as S,g as V,e as P,a as M,b as G,m as z,d as x,N as E,f as T,A,t as B,j as R,F as K}from"./index-BfbtaAX6.js";import{v as $,D as J,g as X}from"./index-CyZhdhc9.js";var _=!1,Y="useSyncExternalStore",Z=W[Y],H=Z||function(r,e,t){var a=e();globalThis.__DEV__!==!1&&!_&&a!==e()&&(_=!0,globalThis.__DEV__!==!1&&j.error(60));var n=v.useState({inst:{value:a,getSnapshot:e}}),i=n[0].inst,s=n[1];return U?v.useLayoutEffect(function(){Object.assign(i,{value:a,getSnapshot:e}),w(i)&&s({inst:i})},[r,a,e]):Object.assign(i,{value:a,getSnapshot:e}),v.useEffect(function(){return w(i)&&s({inst:i}),r(function(){w(i)&&s({inst:i})})},[r]),a};function w(r){var e=r.value,t=r.getSnapshot;try{return e!==t()}catch{return!0}}var rr=Symbol.for("apollo.hook.wrappers");function er(r,e,t){var a=t.queryManager,n=a&&a[rr],i=n&&n[r];return i?i(e):e}var tr=Object.prototype.hasOwnProperty;function b(){}var k=Symbol();function ar(r,e){return e===void 0&&(e=Object.create(null)),er("useQuery",nr,F(e&&e.client))(r,e)}function nr(r,e){var t=ur(r,e),a=t.result,n=t.obsQueryFields;return v.useMemo(function(){return S(S({},a),n)},[a,n])}function ir(r,e,t,a,n){function i(c){var d;$(e,J.Query);var p={client:r,query:e,observable:a&&a.getSSRObservable(n())||r.watchQuery(N(void 0,r,t,n())),resultData:{previousData:(d=c==null?void 0:c.resultData.current)===null||d===void 0?void 0:d.data}};return p}var s=v.useState(i),u=s[0],o=s[1];function f(c){var d,p;Object.assign(u.observable,(d={},d[k]=c,d));var h=u.resultData;o(S(S({},u),{query:c.query,resultData:Object.assign(h,{previousData:((p=h.current)===null||p===void 0?void 0:p.data)||h.previousData,current:void 0})}))}if(r!==u.client||e!==u.query){var y=i(u);return o(y),[y,f]}return[u,f]}function ur(r,e){var t=F(e.client),a=v.useContext(V()).renderPromises,n=!!a,i=t.disableNetworkFetches,s=e.ssr!==!1&&!e.skip,u=e.partialRefetch,o=dr(t,r,e,n),f=ir(t,r,e,a,o),y=f[0],c=y.observable,d=y.resultData,p=f[1],h=o(c);cr(d,c,t,e,h);var O=v.useMemo(function(){return pr(c)},[c]);sr(c,a,s);var m=or(d,c,t,e,h,i,u,n,{onCompleted:e.onCompleted||b,onError:e.onError||b});return{result:m,obsQueryFields:O,observable:c,resultData:d,client:t,onQueryExecuted:p}}function or(r,e,t,a,n,i,s,u,o){var f=v.useRef(o);v.useEffect(function(){f.current=o});var y=(u||i)&&a.ssr===!1&&!a.skip?q:a.skip||n.fetchPolicy==="standby"?I:void 0,c=r.previousData,d=v.useMemo(function(){return y&&L(y,c,e,t)},[t,e,y,c]);return H(v.useCallback(function(p){if(u)return function(){};var h=function(){var g=r.current,l=e.getCurrentResult();g&&g.loading===l.loading&&g.networkStatus===l.networkStatus&&P(g.data,l.data)||Q(l,r,e,t,s,p,f.current)},O=function(g){if(m.current.unsubscribe(),m.current=e.resubscribeAfterError(h,O),!tr.call(g,"graphQLErrors"))throw g;var l=r.current;(!l||l&&l.loading||!P(g,l.error))&&Q({data:l&&l.data,error:g,loading:!1,networkStatus:E.error},r,e,t,s,p,f.current)},m={current:e.subscribe(h,O)};return function(){setTimeout(function(){return m.current.unsubscribe()})}},[i,u,e,r,s,t]),function(){return d||C(r,e,f.current,s,t)},function(){return d||C(r,e,f.current,s,t)})}function sr(r,e,t){e&&t&&(e.registerSSRObservable(r),r.getCurrentResult().loading&&e.addObservableQueryPromise(r))}function cr(r,e,t,a,n){var i;e[k]&&!P(e[k],n)&&(e.reobserve(N(e,t,a,n)),r.previousData=((i=r.current)===null||i===void 0?void 0:i.data)||r.previousData,r.current=void 0),e[k]=n}function dr(r,e,t,a){t===void 0&&(t={});var n=t.skip;t.ssr,t.onCompleted,t.onError;var i=t.defaultOptions,s=M(t,["skip","ssr","onCompleted","onError","defaultOptions"]);return function(u){var o=Object.assign(s,{query:e});return a&&(o.fetchPolicy==="network-only"||o.fetchPolicy==="cache-and-network")&&(o.fetchPolicy="cache-first"),o.variables||(o.variables={}),n?(o.initialFetchPolicy=o.initialFetchPolicy||o.fetchPolicy||D(i,r.defaultOptions),o.fetchPolicy="standby"):o.fetchPolicy||(o.fetchPolicy=(u==null?void 0:u.options.initialFetchPolicy)||D(i,r.defaultOptions)),o}}function N(r,e,t,a){var n=[],i=e.defaultOptions.watchQuery;return i&&n.push(i),t.defaultOptions&&n.push(t.defaultOptions),n.push(G(r&&r.options,a)),n.reduce(z)}function Q(r,e,t,a,n,i,s){var u=e.current;u&&u.data&&(e.previousData=u.data),!r.error&&T(r.errors)&&(r.error=new A({graphQLErrors:r.errors})),e.current=L(vr(r,t,n),e.previousData,t,a),i(),fr(r,u==null?void 0:u.networkStatus,s)}function fr(r,e,t){if(!r.loading){var a=lr(r);Promise.resolve().then(function(){a?t.onError(a):r.data&&e!==r.networkStatus&&r.networkStatus===E.ready&&t.onCompleted(r.data)}).catch(function(n){globalThis.__DEV__!==!1&&j.warn(n)})}}function C(r,e,t,a,n){return r.current||Q(e.getCurrentResult(),r,e,n,a,function(){},t),r.current}function D(r,e){var t;return(r==null?void 0:r.fetchPolicy)||((t=e==null?void 0:e.watchQuery)===null||t===void 0?void 0:t.fetchPolicy)||"cache-first"}function lr(r){return T(r.errors)?new A({graphQLErrors:r.errors}):r.error}function L(r,e,t,a){var n=r.data;r.partial;var i=M(r,["data","partial"]),s=S(S({data:n},i),{client:a,observable:t,variables:t.variables,called:r!==q&&r!==I,previousData:e});return s}function vr(r,e,t){return r.partial&&t&&!r.loading&&(!r.data||Object.keys(r.data).length===0)&&e.options.fetchPolicy!=="cache-only"?(e.refetch(),S(S({},r),{loading:!0,networkStatus:E.refetch})):r}var q=x({loading:!0,data:void 0,error:void 0,networkStatus:E.loading}),I=x({loading:!1,data:void 0,error:void 0,networkStatus:E.ready});function pr(r){return{refetch:r.refetch.bind(r),reobserve:r.reobserve.bind(r),fetchMore:r.fetchMore.bind(r),updateQuery:r.updateQuery.bind(r),startPolling:r.startPolling.bind(r),stopPolling:r.stopPolling.bind(r),subscribeToMore:r.subscribeToMore.bind(r)}}const yr=X`
  query {
    products {
      id
      title
      price
      description
      images
      category {
        id
        name
        image
      }
    }
  }
`,hr=r=>{const{token:{colorBgContainer:e,borderRadiusLG:t}}=B.useToken();return ar(yr,{returnPartialData:!0}),R.jsx(K,{vertical:!0,gap:2,style:{padding:24,background:e,borderRadius:t},children:Array(100).fill("-").map((a,n)=>R.jsx("div",{className:"basis-full",children:a},n))})},mr=hr;export{mr as default};
